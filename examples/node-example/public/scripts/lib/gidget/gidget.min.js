/*! gidget-builder 2015-07-29 */
Hilary.scope("gidget").register({name:"IGidget",dependencies:["Blueprint"],factory:function(a){"use strict";return new a({__blueprintId:"IGidget",GidgetModule:{type:"function",args:["path","callback"]},GidgetRoute:{type:"function",args:["route"]}})}}),Hilary.scope("gidget").register({name:"IGidgetApp",dependencies:["Blueprint"],factory:function(a){"use strict";return new a({__blueprintId:"IGidgetApp",start:{type:"function",args:["err","callback"]},pipelines:"object",registerModule:{type:"function",args:["gidgetModule"]},registerModules:{type:"function",args:["gidgetModules"]}})}}),Hilary.scope("gidget").register({name:"IGidgetModule",dependencies:["Blueprint"],factory:function(a){"use strict";return new a({__blueprintId:"IGidgetModule",get:"object",post:"object",put:"object",del:"object",any:"object"})}}),Hilary.scope("gidget").register({name:"IGidgetRoute",dependencies:["Blueprint"],factory:function(a){"use strict";return new a({__blueprintId:"IGidgetRoute",routeHandler:"function"})}}),Hilary.scope("gidget").register({name:"IRouteEngine",dependencies:["Blueprint"],factory:function(a){"use strict";return new a({__blueprintId:"IRouteEngine",get:{type:"function",args:["path","callback"]},post:{type:"function",args:["path","callback"]},put:{type:"function",args:["path","callback"]},del:{type:"function",args:["path","callback"]},navigate:{type:"function",args:["path","pushStateToHistory"]},before:{type:"function",args:["callback"]},after:{type:"function",args:["callback"]},start:{type:"function",args:["callback"]}})}}),Hilary.scope("gidget").register({name:"IRouteEngineBootstrapper",dependencies:["Blueprint"],factory:function(a){"use strict";return new a({__blueprintId:"IRouteEngine",get:{type:"function",args:["path","callback"]},post:{type:"function",args:["path","callback"]},put:{type:"function",args:["path","callback"]},del:{type:"function",args:["path","callback"]},navigate:{type:"function",args:["path","pushStateToHistory"]},start:{type:"function",args:["callback"]}})}}),Hilary.scope("gidget").register({name:"locale",factory:{errors:{requiresArguments:"The {func} function requires arguments {args}",interfaces:{requiresImplementation:"A valid implementation is required to create a new instance of an interface",requiresProperty:"The implementation is missing a required property: ",requiresArguments:"The implementation of this function requires the arguments: ",notAnIRouteEngine:"The router instance that was passed into the RouteEngine constructor does not implement IRouteEngine",notAnIGidgetApp:"The gidgetApp instance that were passed into the GidgetApp constructor does not implement IGidgetApp",notAnIGidgetModule:"The module that you are trying to register does not implement IGidgetModule",missingOptions:"To create a Gidget instance, you must provide the minimum required options"}}}}),Hilary.scope("gidget").register({name:"argumentValidator",dependencies:["locale","exceptions"],factory:function(a,b){"use strict";return{validate:function(a,c){var d,e=a.syncValidateSignature(c);if(e.result){for(d=0;d<e.errors.length;d+=1)b.throwArgumentException(e.errors[d]);return!0}return e}}}}),Hilary.scope("gidget").register({name:"ExceptionHandler",dependencies:[],factory:function(a){"use strict";var b,c={makeException:void 0,argumentException:void 0,throwArgumentException:void 0,notImplementedException:void 0,throwNotImplementedException:void 0,fetchException:void 0,throwFetchException:void 0,throwException:void 0,"throw":void 0};return a="function"==typeof a?a:function(a){throw console.error(a),a},b=function(a,b,c){var d,e;return"object"==typeof a&&"string"==typeof a.message?(d=a.message,e=a):(d="string"==typeof b?b:a,e=new Error(d)),e.message=d,a!==d&&(e.name=a),c&&(e.data=c),e},c.makeException=b,c.argumentException=function(a,c,d){var e="undefined"==typeof c?a:a+" (argument: "+c+")";return b("ArgumentException",e,d)},c.throwArgumentException=function(a,b,d){c["throw"](c.argumentException(a,b,d))},c.notImplementedException=function(a,c){return b("NotImplementedException",a,c)},c.throwNotImplementedException=function(a,b){c["throw"](c.notImplementedException(a,b))},c.fetchException=function(a){return a=a||{},a.status=a.status||"unknown",b("FetchException","Server Request Failed with status: "+a.status,a)},c.throwFetchException=function(a){throw c["throw"](c.fetchException(a)),new Error("Server Request Failed with status: "+a.status)},c.throwException=function(a){c["throw"](a)},c["throw"]=function(c){a("string"==typeof c?b(c):c)},c}}),Hilary.scope("gidget").register({name:"GidgetApp",dependencies:["IGidgetModule","argumentValidator","is"],factory:function(a,b,c){"use strict";var d=function(d){var e={start:void 0,pipelines:void 0,registerModule:void 0,registerModules:void 0};return e.start=d.start,e.pipelines.before=d.before,e.pipelines.after=d.after,e.registerModule=function(c){if(b.validate(a,c)){var e,f,g,h,i=c.get,j=c.put,k=c.posts,l=c.dels;for(e in i)i.hasOwnProperty(e)&&d.get(e,i[e]);for(f in j)j.hasOwnProperty(f)&&d.put(f,j[f]);for(g in k)k.hasOwnProperty(g)&&d.post(g,k[g]);for(h in l)l.hasOwnProperty(h)&&d.del(h,l[h])}},e.registerModules=function(a){if(c.array(a)){var b;for(b=0;b<a.length;b+=1)e.registerModule(a[b])}},e};return d}}),Hilary.scope("gidget").register({name:"GidgetModule",dependencies:[],factory:function(){"use strict";return function(){var a={};return a.get={},a.post={},a.put={},a.del={},a.any={},a}}}),Hilary.scope("gidget").register({name:"GidgetRoute",dependencies:["IGidgetRoute"],factory:function(a){"use strict";return function(a){if(!a)throw new Error("GidgetRoute does not have a parameterless constructor");if("function"!=typeof a.routeHandler)throw new Error("A routeHandler function is required when creating a new GidgetRoute");var b=a.routeHandler;return"function"==typeof a.before&&(b.before=a.before),"function"==typeof a.after&&(b.after=a.after),b}}}),Hilary.scope("gidget").register({name:"RouteEngine",dependencies:["IRouteEngineBootstrapper","argumentValidator","is","locale","exceptions"],factory:function(a,b,c,d,e){"use strict";var f=function(f){var g,h,i,j,k,l,m,n,o=[];if(b.valdate(a,f))return g={get:f.get,post:f.post,put:f.put,del:f.del,navigate:void 0,before:f.before,after:f.after,executeBeforePipeline:void 0,executeAfterPipeline:void 0,start:f.start},h={escapeRegExp:/[-[\]{}()+?.,\\^$|#\s]/g,namedParam:/:(\w+)/g,splatParam:/\*(\w+)/g,firstParam:/(:\w+)|(\*\w+)/,allParams:/(:|\*)\w+/g,extractHash:/^[^#]*(#.*)$/},i={before:[],after:[]},j=function(a,b,c,d,e){var f;for(f=0;f<a.length;f+=1)a[f](b,c,d,e)},k=function(a,b,f){var h,i;(c.not.defined(b)||c.not["function"](f))&&e.throwArgumentException(d.errors.requiresArguments.replace("{func}","addRoute").replace("{args}","(verb, path, callback)")),i=l(b),h=function(d){var e=!0,h=m(b,d.params);c["function"](f.before)&&(e=f.before(h)),e!==!1&&(g.executeBeforePipeline(a,b,h),e=f(h),e!==!1&&(c["function"](f.after)&&(e=f.after(h)),e!==!1&&g.executeAfterPipeline(a,b,h)))},o.push({route:i,callback:h})},l=function(a,b){var c,d,e,f;return a=String(a),e=a.match(h.allParams),f=null!==e?function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a+=1)d=e[a],c.push(d.substr(1));return c}():[],a=a.replace(h.escapeRegExp,"\\$&"),a=a.replace(h.namedParam,"([^/]+)"),a=a.replace(h.splatParam,"(.+?)"),c=b?"":"i",{expression:new RegExp("^"+a+"/?$",c),params:f,pattern:a}},m=function(a,b){if("string"==typeof a){var c,d=a.match(/:([^\/]*)/g);if(null===d||d.length<1)return b;for(c=0;c<d.length;c+=1)b[d[c].replace(/:/g,"")]=b.splat[c]}return b},n=function(){return String(location.hash).replace(h.extractHash,"$1")},g.before=g.before||function(a){"function"==typeof a&&i.before.push(a)},g.after=g.after||function(a){"function"==typeof a&&i.after.push(a)},g.executeBeforePipeline=function(a,b,c,d){j(i.before,a,b,c,d)},g.executeAfterPipeline=function(a,b,c,d){j(i.after,a,b,c,d)},g.navigate=function(a,b){},g};return f}}),function(a,b,c){"use strict";var d,e;d=function(){var c;b.register({name:"application",factory:function(){return{compose:d,start:e}}}),b.register({name:"Blueprint",factory:function(){return a.Blueprint}}),b.register({name:"is",factory:function(){return b.getContext().is}}),b.register({name:"exceptions",dependencies:["ExceptionHandler"],factory:function(a){return c||(c=new a(function(a){throw a.data&&console.log(a.message,a.data),a})),c}}),b.register({name:"Gidget",blueprint:"IGidget",dependencies:["IRouteEngine","GidgetModule","GidgetRoute","GidgetApp","argumentValidator"],factory:function(a,b,c,d,e){var f=function(b){return b=b||{},e.validate(a,b.routeEngine)?void 0:new d(b.routeEngine)};return f.GidgetModule=b,f.GidgetRoute=c,f}})},(e=function(){d(),c.Gidget=b.resolve("Gidget")})()}(Hilary,Hilary.scope("gidget"),"undefined"!=typeof module&&module.exports?module.exports:window);