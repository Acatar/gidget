/*! gidget-builder 2015-07-27 */
Hilary.scope("GidgetContainer").register({name:"ExceptionHandler",dependencies:[],factory:function(a){"use strict";var b,c={makeException:void 0,argumentException:void 0,throwArgumentException:void 0,notImplementedException:void 0,throwNotImplementedException:void 0,fetchException:void 0,throwFetchException:void 0,throwException:void 0,"throw":void 0};return a="function"==typeof a?a:function(a){throw console.error(a),a},b=function(a,b,c){var d,e;return"object"==typeof a&&"string"==typeof a.message?(d=a.message,e=a):(d="string"==typeof b?b:a,e=new Error(d)),e.message=d,a!==d&&(e.name=a),c&&(e.data=c),e},c.makeException=b,c.argumentException=function(a,c,d){var e="undefined"==typeof c?a:a+" (argument: "+c+")";return b("ArgumentException",e,d)},c.throwArgumentException=function(a,b,d){c["throw"](c.argumentException(a,b,d))},c.notImplementedException=function(a,c){return b("NotImplementedException",a,c)},c.throwNotImplementedException=function(a,b){c["throw"](c.notImplementedException(a,b))},c.fetchException=function(a){return a=a||{},a.status=a.status||"unknown",b("FetchException","Server Request Failed with status: "+a.status,a)},c.throwFetchException=function(a){throw c["throw"](c.fetchException(a)),new Error("Server Request Failed with status: "+a.status)},c.throwException=function(a){c["throw"](a)},c["throw"]=function(c){a("string"==typeof c?b(c):c)},c}}),Hilary.scope("GidgetContainer").register({name:"locale::en_US",factory:{errors:{interfaces:{requiresImplementation:"A valid implementation is required to create a new instance of an interface",requiresProperty:"The implementation is missing a required property: ",requiresArguments:"The implementation of this function requires the arguments: ",notAnIRouteEngine:"The router instance that was passed into the RouteEngine constructor does not implement IRouteEngine",notAnIGidgetApp:"The gidgetApp instance that were passed into the GidgetApp constructor does not implement IGidgetApp",notAnIGidgetModule:"The module that you are trying to register does not implement IGidgetModule",missingOptions:"To create a Gidget instance, you must provide the minimum required options"}}}}),Hilary.scope("GidgetContainer").register({name:"IGidgetModule",dependencies:["Blueprint"],factory:function(a){"use strict";return new a({__blueprintId:"IGidgetModule",get:"object",post:"object",put:"object",del:"object",any:"object"})}}),Hilary.scope("GidgetContainer").register({name:"GidgetModule",factory:function(){"use strict";return function(){var a={};return a.get={},a.post={},a.put={},a.del={},a.any={},a}}}),Hilary.scope("GidgetContainer").register({name:"GidgetRoute",factory:function(){"use strict";return function(a){if(!a)throw new Error("GidgetRoute does not have a parameterless constructor");if("function"!=typeof a.routeHandler)throw new Error("A routeHandler function is required when creating a new GidgetRoute");var b=a.routeHandler;return"function"==typeof a.before&&(b.before=a.before),"function"==typeof a.after&&(b.after=a.after),b}}}),Hilary.scope("GidgetContainer").register({name:"IRouteEngine",dependencies:["Blueprint"],factory:function(a){"use strict";return new a({__blueprintId:"IRouteEngine",get:{type:"function",args:["path","callback"]},post:{type:"function",args:["path","callback"]},put:{type:"function",args:["path","callback"]},del:{type:"function",args:["path","callback"]},any:{type:"function",args:["path","callback"]},start:"function",navigate:{type:"function",args:["hash","updateUrlBar"]}})}}),Hilary.scope("GidgetContainer").register({name:"RouteEngine",dependencies:["IRouteEngine","locale","exceptions"],factory:function(a,b,c){"use strict";return function(d){var e,f,g={};return a.syncSignatureMatches(d).result?(e={before:[],after:[]},f={escapeRegExp:/[-[\]{}()+?.,\\^$|#\s]/g,namedParam:/:(\w+)/g,splatParam:/\*(\w+)/g,firstParam:/(:\w+)|(\*\w+)/,allParams:/(:|\*)\w+/g,extractHash:/^[^#]*(#.*)$/},g.get=d.get,g.post=d.post,g.put=d.put,g.del=d.del,g.any=d.any,g.start=d.start,g.navigate=d.navigate,g.pipelineRegistries=e,g.before=d.before||function(a){"function"==typeof a&&e.before.push(a)},g.after=d.after||function(a){"function"==typeof a&&e.after.push(a)},g.parseRoute=function(a,b){var c,d,e,g;return a=String(a),e=a.match(f.allParams),g=null!==e?function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a+=1)d=e[a],c.push(d.substr(1));return c}():[],a=a.replace(f.escapeRegExp,"\\$&"),a=a.replace(f.namedParam,"([^/]+)"),a=a.replace(f.splatParam,"(.+?)"),c=b?"":"i",{expression:new RegExp("^"+a+"/?$",c),params:g,pattern:a}},g.getHash=function(){return String(location.hash).replace(f.extractHash,"$1")},g.executePipeline=function(a,b,c,d,e){var f;for(f=0;f<a.length;f+=1)a[f](b,c,d,e)},g):void c.throwNotImplementedException(b.errors.interfaces.notAnIRouteEngine,a.syncSignatureMatches(d).errors)}}}),Hilary.scope("GidgetContainer").register({name:"IGidgetApp",dependencies:["Blueprint","IRouteEngine"],factory:function(a,b){"use strict";return new a({__blueprintId:"IGidgetApp",GidgetModule:"function",GidgetRoute:{type:"function",args:["route"]},routeEngine:{validate:function(a,c){var d=b.syncSignatureMatches(a);d.result||(c=c.concat(d.errors))}},pipelines:"function",registerModule:{type:"function",args:["gidgetModule"]}})}}),Hilary.scope("GidgetContainer").register({name:"GidgetApp",dependencies:["IGidgetApp","locale","exceptions"],factory:function(a,b,c){"use strict";return function(d){return d=d||{},d.pipelines=function(){return{before:d.routeEngine.before,after:d.routeEngine.after}},a.syncSignatureMatches(d).result||c.throwNotImplementedException(b.errors.interfaces.requiresImplementation,a.syncSignatureMatches(d).errors),d}}}),Hilary.scope("GidgetContainer").register({name:"GidgetCtor",dependencies:["IGidgetModule","GidgetModule","GidgetRoute","GidgetApp","locale","exceptions"],factory:function(a,b,c,d,e,f){"use strict";return function(g,h){var i,j;return i=function(b){if(!a.syncSignatureMatches(b).result)return void f.throwNotImplementedException(e.errors.interfaces.notAnIGidgetModule,a.syncSignatureMatches(b).errors);var c,d,h,i,j,k=b.get,l=b.put,m=b.posts,n=b.dels,o=b.anys;for(c in k)k.hasOwnProperty(c)&&g.get(c,k[c]);for(d in l)l.hasOwnProperty(d)&&g.put(d,l[d]);for(h in m)m.hasOwnProperty(h)&&g.post(h,m[h]);for(i in n)n.hasOwnProperty(i)&&g.del(i,n[i]);for(j in o)o.hasOwnProperty(j)&&g.get(j,o[j])},j=new d({GidgetModule:b,GidgetRoute:c,routeEngine:g,registerModule:i}),"function"==typeof h&&h(j),j}}}),Hilary.scope("GidgetContainer").register({name:"IOptions",dependencies:["Blueprint"],factory:function(a){"use strict";return new a({__blueprintId:"IOptions",routerName:"string"})}}),function(a,b,c){"use strict";var d,e;d=function(){var a,d=b.resolve("locale::en_US");b.register({name:"locale",factory:function(){return d}}),b.register({name:"Blueprint",factory:function(){return c.Blueprint}}),b.register({name:"exceptions",dependencies:["ExceptionHandler"],factory:function(b){return a?a:a=new b(function(a){throw a.data&&console.log(a.message,a.data),a})}}),b.register({name:"Gidget",dependencies:["RouteEngine","GidgetCtor","IOptions","exceptions","locale"],factory:function(a,c,d,e,f){return function(g){var h,i,j={};return h=d.syncSignatureMatches(g),h.result?(i=b.resolve(g.routerName),i.compose(a,g,function(a){return j=new c(a,g.callback)}),j):void e.throwNotImplementedException(f.errors.interfaces.missingOptions)}}}),e()},e=function(){a.Gidget=b.resolve("Gidget")},d(e)}("undefined"!=typeof module&&module.exports?module.exports:window,Hilary.scope("GidgetContainer"),Hilary);