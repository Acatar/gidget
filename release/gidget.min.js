/*! gidget-builder 2015-07-27 */
Hilary.scope("GidgetContainer").register({name:"implementr",factory:function(){"use strict";var a=function(a,b){if(!a)throw new Error("A first argument of an object that should implement an interface is required");if(!b||"function"!=typeof b.validate||1!==b.validate.length)throw new Error("A second argument with a validate function that accepts one argument is required");if("string"!=typeof b.name)throw new Error("A second argument with a name string is required");return b.validate(a)?(a.$_interfaces=a.$_interfaces||{},a.$_interfaces[b.name]=!0,!0):!1};return{implementsInterface:a}}}),Hilary.scope("GidgetContainer").register({name:"exceptions",factory:function(){"use strict";var a,b={makeException:void 0,argumentException:void 0,throwArgumentException:void 0,notImplementedException:void 0,throwNotImplementedException:void 0,throwException:void 0};return a=function(a,b,c){var d="string"==typeof b?b:a,e=new Error(d);return e.message=d,a!==d&&(e.name=a),c&&(e.data=c),e},b.makeException=a,b.argumentException=function(b,c,d){var e="undefined"==typeof c?b:b+" (argument: "+c+")";return a("ArgumentException",e,d)},b.throwArgumentException=function(a,c,d){b.throwException(b.argumentException(a,c,d))},b.notImplementedException=function(b,c){return a("NotImplementedException",b,c)},b.throwNotImplementedException=function(a,c){b.throwException(b.notImplementedException(a,c))},b.throwException=function(a){throw a},b}}),Hilary.scope("GidgetContainer").register({name:"locale::en_US",factory:{errors:{interfaces:{requiresImplementation:"An implementation is required to create a new instance of an interface",requiresProperty:"The implementation is missing a required property: ",requiresArguments:"The implementation of this function requires the arguments: ",notAnIRouteEngine:"The router instance that was passed into the RouteEngine constructor does not implement IRouteEngine",notAnIGidgetApp:"The gidgetApp instance that were passed into the GidgetApp constructor does not implement IGidgetApp",notAnIGidgetModule:"The module that you are trying to register does not implement IGidgetModule",missingOptions:"To create a Gidget instance, you must provide the minimum required options"}}}}),Hilary.scope("GidgetContainer").register({name:"IGidgetModule",dependencies:["locale","exceptions"],factory:function(a,b){"use strict";return{name:"IGidgetModule",validate:function(c){var d;return c||b.throwNotImplementedException(a.errors.interfaces.requiresImplementation),d=function(d){"object"!=typeof c[d]&&b.throwNotImplementedException(a.errors.interfaces.requiresProperty+"IRouteEngine."+d)},d("get"),d("post"),d("put"),d("del"),d("any"),!0}}}}),Hilary.scope("GidgetContainer").register({name:"GidgetModule",factory:function(){"use strict";return function(){var a={};return a.get={},a.post={},a.put={},a.del={},a.any={},a}}}),Hilary.scope("GidgetContainer").register({name:"IRouteEngine",dependencies:["locale","exceptions"],factory:function(a,b){"use strict";return{name:"IRouteEngine",validate:function(c){var d;return c||b.throwNotImplementedException(a.errors.interfaces.requiresImplementation),d=function(d){"function"!=typeof c[d]&&b.throwNotImplementedException(a.errors.interfaces.requiresProperty+"IRouteEngine."+d),2!==c[d].length&&b.throwNotImplementedException(a.errors.interfaces.requiresArguments+"IRouteEngine."+d+"(path, callback)")},d("get"),d("post"),d("put"),d("del"),d("any"),"function"!=typeof c.start&&b.throwNotImplementedException(a.errors.interfaces.requiresProperty+"IRouteEngine.start"),"function"!=typeof c.navigate&&b.throwNotImplementedException(a.errors.interfaces.requiresProperty+"IRouteEngine.navigate"),2!==c.navigate.length&&b.throwNotImplementedException(a.errors.interfaces.requiresArguments+"IRouteEngine.navigate(hash, updateUrlBar)"),!0}}}}),Hilary.scope("GidgetContainer").register({name:"RouteEngine",dependencies:["implementr","IRouteEngine","locale","exceptions"],factory:function(a,b,c,d){"use strict";return function(e){var f,g,h={};return a.implementsInterface(e,b)?(f={before:[],after:[]},g={escapeRegExp:/[-[\]{}()+?.,\\^$|#\s]/g,namedParam:/:(\w+)/g,splatParam:/\*(\w+)/g,firstParam:/(:\w+)|(\*\w+)/,allParams:/(:|\*)\w+/g,extractHash:/^[^#]*(#.*)$/},h.get=e.get,h.post=e.post,h.put=e.put,h.del=e.del,h.any=e.any,h.start=e.start,h.navigate=e.navigate,h.pipelineRegistries=f,h.before=e.before||function(a){"function"==typeof a&&f.before.push(a)},h.after=e.after||function(a){"function"==typeof a&&f.after.push(a)},h.parseRoute=function(a,b){var c,d,e,f;return a=String(a),e=a.match(g.allParams),f=null!=e?function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a+=1)d=e[a],c.push(d.substr(1));return c}():[],a=a.replace(g.escapeRegExp,"\\$&"),a=a.replace(g.namedParam,"([^/]+)"),a=a.replace(g.splatParam,"(.+?)"),c=b?"":"i",{expression:new RegExp("^"+a+"/?$",c),params:f,pattern:a}},h.getHash=function(){return String(location.hash).replace(g.extractHash,"$1")},h.executePipeline=function(a,b,c,d,e){var f;for(f=0;f<a.length;f+=1)a[f](b,c,d,e)},h):void d.throwNotImplementedException(c.errors.interfaces.notAnIRouteEngine)}}}),Hilary.scope("GidgetContainer").register({name:"IGidgetApp",dependencies:["locale","exceptions"],factory:function(a,b){"use strict";return{name:"IGidgetApp",validate:function(c){return c||b.throwNotImplementedException(a.errors.interfaces.requiresImplementation),!0}}}}),Hilary.scope("GidgetContainer").register({name:"GidgetApp",dependencies:["implementr","IGidgetApp","locale","exceptions"],factory:function(a,b,c,d){"use strict";return function(e){var f={};return a.implementsInterface(e,b)?(f.GidgetModule=e.GidgetModule,f.routeEngine=e.routeEngine,f.pipelines=function(){return{before:f.routeEngine.before,after:f.routeEngine.after}},f.registerModule=e.registerModule,f):void d.throwNotImplementedException(c.errors.interfaces.notAnIGidgetApp)}}}),Hilary.scope("GidgetContainer").register({name:"GidgetCtor",dependencies:["IGidgetModule","GidgetModule","GidgetApp","implementr","locale","exceptions"],factory:function(a,b,c,d,e,f){"use strict";return function(g,h){var i,j;return i=function(b){if(!d.implementsInterface(b,a))return void f.throwNotImplementedException(e.errors.interfaces.notAnIGidgetModule);var c,h,i,j,k,l=b.get,m=b.put,n=b.posts,o=b.dels,p=b.anys;for(c in l)l.hasOwnProperty(c)&&g.get(c,l[c]);for(h in m)m.hasOwnProperty(h)&&g.put(h,m[h]);for(i in n)n.hasOwnProperty(i)&&g.post(i,n[i]);for(j in o)o.hasOwnProperty(j)&&g.del(j,o[j]);for(k in p)p.hasOwnProperty(k)&&g.get(k,p[k])},j=new c({GidgetModule:b,routeEngine:g,registerModule:i}),"function"==typeof h&&h(j),j}}}),Hilary.scope("GidgetContainer").register({name:"IOptions",dependencies:["locale","exceptions"],factory:function(a,b){"use strict";return{name:"IOptions",validate:function(c){return c||b.throwNotImplementedException(a.errors.interfaces.requiresImplementation),"string"!=typeof c.routerName&&b.throwNotImplementedException(a.errors.interfaces.requiresProperty+"IOptions.routerName"),"undefined"==typeof c.router&&b.throwNotImplementedException(a.errors.interfaces.requiresProperty+"IOptions.router"),!0}}}}),function(a,b){"use strict";var c,d;c=function(a){var c=b.resolve("locale::en_US");b.register({name:"locale",factory:function(){return c}}),b.register({name:"Gidget",dependencies:["IRouteEngine","RouteEngine","GidgetCtor","IOptions","implementr","exceptions","locale"],factory:function(a,c,d,e,f,g,h){return function(i){var j,k={};return f.implementsInterface(i,e)?(j=b.resolve(i.routerName),j.compose(c,i,function(b){return f.implementsInterface(b,a)?k=new d(b,i.callback):void g.throwNotImplementedException(h.errors.interfaces.notAnIRouteEngine)}),k):void g.throwNotImplementedException(h.errors.interfaces.missingOptions)}}}),d()},d=function(){a.Gidget=b.resolve("Gidget")},c(d)}("undefined"!=typeof module&&module.exports?module.exports:window,Hilary.scope("GidgetContainer"));